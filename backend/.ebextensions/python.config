option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: main:app  # Untuk FastAPI, meski Procfile lebih diutamakan
  aws:elasticbeanstalk:environment:process:default:
    HealthCheckPath: /health
    MatcherHTTPCode: 200
commands:
  01_upgrade_pip:
    command: /var/app/venv/*/bin/pip install --upgrade pip
  02_check_requirements:
    command: ls -la /var/app/staging/requirements.txt || echo "requirements.txt not found"
  03_install_requirements:
    command: /var/app/venv/*/bin/pip install -r /var/app/staging/requirements.txt --no-cache-dir --timeout 300